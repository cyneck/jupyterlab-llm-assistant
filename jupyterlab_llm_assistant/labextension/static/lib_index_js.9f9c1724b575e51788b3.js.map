{"version":3,"file":"lib_index_js.9f9c1724b575e51788b3.js","mappings":"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","sources":["webpack://jupyterlab-llm-assistant/./src/components/ChatPanel.tsx","webpack://jupyterlab-llm-assistant/./src/components/CodeBlock.tsx","webpack://jupyterlab-llm-assistant/./src/components/InputArea.tsx","webpack://jupyterlab-llm-assistant/./src/components/MarkdownRenderer.tsx","webpack://jupyterlab-llm-assistant/./src/components/MessageItem.tsx","webpack://jupyterlab-llm-assistant/./src/components/MessageList.tsx","webpack://jupyterlab-llm-assistant/./src/components/SettingsPanel.tsx","webpack://jupyterlab-llm-assistant/./src/components/icons.ts","webpack://jupyterlab-llm-assistant/./src/index.ts","webpack://jupyterlab-llm-assistant/./src/models/chat.ts","webpack://jupyterlab-llm-assistant/./src/models/settings.ts","webpack://jupyterlab-llm-assistant/./src/services/api.ts","webpack://jupyterlab-llm-assistant/./src/widgets/LLMAssistantPanel.tsx"],"sourcesContent":["/**\n * Main chat panel component.\n */\n\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { LLMSettings, ImageData, ConnectionTestResult } from '../models/types';\nimport { ChatModel } from '../models/chat';\nimport { SettingsModel } from '../models/settings';\nimport { MessageList } from './MessageList';\nimport { InputArea } from './InputArea';\nimport { SettingsPanel } from './SettingsPanel';\n\nexport interface ChatPanelProps {\n  settings: LLMSettings;\n  onOpenSettings: () => void;\n}\n\n/**\n * Main chat panel component\n */\nexport const ChatPanel: React.FC<ChatPanelProps> = ({ settings, onOpenSettings }) => {\n  const [showSettings, setShowSettings] = useState(false);\n  const [currentSettings, setCurrentSettings] = useState<LLMSettings>(settings);\n  const [isTestingConnection, setIsTestingConnection] = useState(false);\n\n  // Create model instances\n  const chatModelRef = useRef<ChatModel | null>(null);\n  const settingsModelRef = useRef<SettingsModel | null>(null);\n\n  // State for re-rendering\n  const [messages, setMessages] = useState(chatModelRef.current?.messages || []);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Initialize models\n  useEffect(() => {\n    if (!chatModelRef.current) {\n      chatModelRef.current = new ChatModel(currentSettings);\n      settingsModelRef.current = new SettingsModel(currentSettings);\n\n      // Load saved settings\n      settingsModelRef.current.loadSettings().then((loadedSettings) => {\n        setCurrentSettings(loadedSettings);\n        chatModelRef.current?.updateSettings(loadedSettings);\n      });\n\n      // Subscribe to model changes\n      chatModelRef.current.messagesChanged.connect((_, newMessages) => {\n        setMessages([...newMessages]);\n      });\n\n      chatModelRef.current.loadingChanged.connect((_, loading) => {\n        setIsLoading(loading);\n      });\n\n      chatModelRef.current.errorChanged.connect((_, err) => {\n        setError(err);\n      });\n    }\n\n    return () => {\n      // Cleanup\n    };\n  }, []);\n\n  // Update chat model when settings change\n  useEffect(() => {\n    chatModelRef.current?.updateSettings(currentSettings);\n  }, [currentSettings]);\n\n  // Handle send message\n  const handleSend = useCallback(async (text: string, images: ImageData[]) => {\n    if (!chatModelRef.current) return;\n\n    try {\n      await chatModelRef.current.sendMessage(text, images);\n    } catch (err) {\n      console.error('Failed to send message:', err);\n    }\n  }, []);\n\n  // Handle clear chat\n  const handleClear = useCallback(() => {\n    if (!chatModelRef.current) return;\n    chatModelRef.current.clear();\n  }, []);\n\n  // Handle settings change\n  const handleSettingsChange = useCallback(async (newSettings: Partial<LLMSettings>) => {\n    if (!settingsModelRef.current) return;\n\n    try {\n      await settingsModelRef.current.saveSettings(newSettings);\n      setCurrentSettings((prev) => ({ ...prev, ...newSettings }));\n    } catch (err) {\n      console.error('Failed to save settings:', err);\n    }\n  }, []);\n\n  // Handle test connection\n  const handleTestConnection = useCallback(async (): Promise<ConnectionTestResult> => {\n    if (!settingsModelRef.current) {\n      return { success: false, error: 'Settings not initialized' };\n    }\n\n    setIsTestingConnection(true);\n    try {\n      // Save current settings first\n      await settingsModelRef.current.saveSettings(currentSettings);\n      const result = await settingsModelRef.current.testConnection();\n      return result;\n    } finally {\n      setIsTestingConnection(false);\n    }\n  }, [currentSettings]);\n\n  // Handle close settings\n  const handleCloseSettings = useCallback(() => {\n    setShowSettings(false);\n  }, []);\n\n  // Handle open settings\n  const handleOpenSettingsPanel = useCallback(() => {\n    setShowSettings(true);\n  }, []);\n\n  return (\n    <div className=\"llm-chat-panel\">\n      {/* Header */}\n      <div className=\"llm-chat-header\">\n        <h3>LLM Assistant</h3>\n        <div className=\"llm-header-actions\">\n          <button\n            className=\"llm-header-btn\"\n            onClick={handleClear}\n            title=\"Clear chat\"\n          >\n            <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\n              <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" />\n            </svg>\n          </button>\n          <button\n            className=\"llm-header-btn\"\n            onClick={handleOpenSettingsPanel}\n            title=\"Settings\"\n          >\n            <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\n              <path d=\"M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      {/* Content area */}\n      {showSettings ? (\n        <SettingsPanel\n          settings={currentSettings}\n          onSettingsChange={handleSettingsChange}\n          onClose={handleCloseSettings}\n          onTestConnection={handleTestConnection}\n          isTestingConnection={isTestingConnection}\n        />\n      ) : (\n        <>\n          {/* Error message */}\n          {error && (\n            <div className=\"llm-error-banner\">\n              <span>{error}</span>\n              <button onClick={() => setError(null)}>\n                <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n                </svg>\n              </button>\n            </div>\n          )}\n\n          {/* Model indicator */}\n          <div className=\"llm-model-indicator\">\n            <span className=\"llm-model-name\">{currentSettings.model}</span>\n            {!(currentSettings.hasApiKey || (currentSettings.apiKey && currentSettings.apiKey.length > 0)) && (\n              <span className=\"llm-api-warning\">API Key not set</span>\n            )}\n          </div>\n\n          {/* Message list */}\n          <MessageList messages={messages} isLoading={isLoading} />\n\n          {/* Input area */}\n          <InputArea\n            onSend={handleSend}\n            disabled={isLoading || !(currentSettings.hasApiKey || (currentSettings.apiKey && currentSettings.apiKey.length > 0))}\n            enableVision={currentSettings.enableVision}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ChatPanel;","/**\n * Code block component with copy functionality.\n */\n\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport hljs from 'highlight.js';\n\nexport interface CodeBlockProps {\n  code: string;\n  language: string;\n}\n\n/**\n * Code block with syntax highlighting and copy button\n */\nexport const CodeBlock: React.FC<CodeBlockProps> = ({ code, language }) => {\n  const [copied, setCopied] = useState(false);\n  const codeRef = useRef<HTMLElement>(null);\n\n  // Apply syntax highlighting\n  useEffect(() => {\n    if (codeRef.current) {\n      hljs.highlightElement(codeRef.current);\n    }\n  }, [code, language]);\n\n  // Handle copy to clipboard\n  const handleCopy = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(code);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      console.error('Failed to copy:', err);\n    }\n  }, [code]);\n\n  // Normalize language name\n  const normalizedLanguage = language || 'plaintext';\n\n  return (\n    <div className=\"llm-code-block\">\n      <div className=\"llm-code-header\">\n        <span className=\"llm-code-language\">{normalizedLanguage}</span>\n        <button\n          className=\"llm-code-copy-btn\"\n          onClick={handleCopy}\n          title={copied ? 'Copied!' : 'Copy code'}\n        >\n          {copied ? (\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\n              <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\" />\n            </svg>\n          ) : (\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\n              <path d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\" />\n            </svg>\n          )}\n          <span>{copied ? 'Copied!' : 'Copy'}</span>\n        </button>\n      </div>\n      <pre className=\"llm-code-content\">\n        <code\n          ref={codeRef}\n          className={`language-${normalizedLanguage}`}\n        >\n          {code}\n        </code>\n      </pre>\n    </div>\n  );\n};\n\nexport default CodeBlock;","/**\n * Input area component for chat messages.\n */\n\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { ImageData } from '../models/types';\n\nexport interface InputAreaProps {\n  onSend: (text: string, images: ImageData[]) => void;\n  disabled: boolean;\n  enableVision: boolean;\n}\n\n/**\n * Generate unique ID\n */\nfunction generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Input area component with text input and image upload\n */\nexport const InputArea: React.FC<InputAreaProps> = ({\n  onSend,\n  disabled,\n  enableVision,\n}) => {\n  const [text, setText] = useState('');\n  const [images, setImages] = useState<ImageData[]>([]);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 200)}px`;\n    }\n  }, [text]);\n\n  // Handle text change\n  const handleTextChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setText(e.target.value);\n  }, []);\n\n  // Handle image file selection\n  const handleImageSelect = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) return;\n\n    const newImages: ImageData[] = [];\n\n    for (const file of Array.from(files)) {\n      if (!file.type.startsWith('image/')) continue;\n\n      // Read file as data URL\n      const dataUrl = await new Promise<string>((resolve) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.readAsDataURL(file);\n      });\n\n      newImages.push({\n        id: generateId(),\n        dataUrl,\n        file,\n        preview: dataUrl,\n      });\n    }\n\n    setImages((prev) => [...prev, ...newImages]);\n\n    // Reset file input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, []);\n\n  // Handle paste event for images\n  const handlePaste = useCallback(async (e: React.ClipboardEvent) => {\n    if (!enableVision) return;\n\n    const items = e.clipboardData.items;\n    const newImages: ImageData[] = [];\n\n    for (const item of Array.from(items)) {\n      if (!item.type.startsWith('image/')) continue;\n\n      const file = item.getAsFile();\n      if (!file) continue;\n\n      // Read file as data URL\n      const dataUrl = await new Promise<string>((resolve) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.readAsDataURL(file);\n      });\n\n      newImages.push({\n        id: generateId(),\n        dataUrl,\n        file,\n        preview: dataUrl,\n      });\n    }\n\n    if (newImages.length > 0) {\n      setImages((prev) => [...prev, ...newImages]);\n    }\n  }, [enableVision]);\n\n  // Remove image\n  const handleRemoveImage = useCallback((id: string) => {\n    setImages((prev) => prev.filter((img) => img.id !== id));\n  }, []);\n\n  // Handle send\n  const handleSend = useCallback(() => {\n    if (disabled) return;\n    if (!text.trim() && images.length === 0) return;\n\n    onSend(text.trim(), images);\n    setText('');\n    setImages([]);\n\n    // Reset textarea height\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n    }\n  }, [text, images, disabled, onSend]);\n\n  // Handle keyboard shortcuts\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n    // Send on Enter (without Shift)\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  }, [handleSend]);\n\n  // Handle image button click\n  const handleImageButtonClick = useCallback(() => {\n    fileInputRef.current?.click();\n  }, []);\n\n  const canSend = !disabled && (text.trim().length > 0 || images.length > 0);\n\n  return (\n    <div className=\"llm-input-area\">\n      {/* Image previews */}\n      {images.length > 0 && (\n        <div className=\"llm-image-previews\">\n          {images.map((image) => (\n            <div key={image.id} className=\"llm-image-preview\">\n              <img src={image.preview} alt=\"Preview\" />\n              <button\n                className=\"llm-image-remove\"\n                onClick={() => handleRemoveImage(image.id)}\n                title=\"Remove image\"\n              >\n                <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" fill=\"currentColor\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n                </svg>\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Input row */}\n      <div className=\"llm-input-row\">\n        {/* Image upload button */}\n        {enableVision && (\n          <>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              multiple\n              onChange={handleImageSelect}\n              style={{ display: 'none' }}\n            />\n            <button\n              className=\"llm-image-btn\"\n              onClick={handleImageButtonClick}\n              disabled={disabled}\n              title=\"Attach image\"\n            >\n              <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\n                <path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\" />\n              </svg>\n            </button>\n          </>\n        )}\n\n        {/* Text input */}\n        <textarea\n          ref={textareaRef}\n          className=\"llm-text-input\"\n          value={text}\n          onChange={handleTextChange}\n          onKeyDown={handleKeyDown}\n          onPaste={handlePaste}\n          placeholder={enableVision ? \"Send a message... (paste images supported)\" : \"Send a message...\"}\n          disabled={disabled}\n          rows={1}\n        />\n\n        {/* Send button */}\n        <button\n          className=\"llm-send-btn\"\n          onClick={handleSend}\n          disabled={!canSend}\n          title=\"Send message (Enter)\"\n        >\n          <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\n            <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\" />\n          </svg>\n        </button>\n      </div>\n\n      {/* Hint text */}\n      <div className=\"llm-input-hint\">\n        <span>Enter to send, Shift+Enter for new line</span>\n      </div>\n    </div>\n  );\n};\n\nexport default InputArea;","/**\n * Markdown renderer component.\n */\n\nimport React, { useMemo } from 'react';\nimport ReactMarkdown, { Components } from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport { CodeBlock } from './CodeBlock';\n\nexport interface MarkdownRendererProps {\n  content: string;\n}\n\n/**\n * Custom paragraph component\n */\nconst Paragraph: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return <p className=\"llm-md-paragraph\">{children}</p>;\n};\n\n/**\n * Custom link component\n */\nconst Link: React.FC<{ href?: string; children: React.ReactNode }> = ({ href, children }) => {\n  return (\n    <a\n      href={href}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"llm-md-link\"\n    >\n      {children}\n    </a>\n  );\n};\n\n/**\n * Custom code component\n */\nconst Code: React.FC<{\n  inline?: boolean;\n  className?: string;\n  children: React.ReactNode;\n}> = ({ inline, className, children }) => {\n  const match = /language-(\\w+)/.exec(className || '');\n  const lang = match ? match[1] : '';\n  const codeString = String(children).replace(/\\n$/, '');\n\n  if (inline) {\n    return <code className=\"llm-md-code-inline\">{children}</code>;\n  }\n\n  // Check if it's a code block with language\n  if (lang || codeString.includes('\\n')) {\n    return <CodeBlock code={codeString} language={lang} />;\n  }\n\n  // Single line code without language\n  return <code className=\"llm-md-code-inline\">{children}</code>;\n};\n\n/**\n * Custom pre component (we handle this in Code component)\n */\nconst Pre: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return <>{children}</>;\n};\n\n/**\n * Custom list components\n */\nconst Ul: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return <ul className=\"llm-md-list\">{children}</ul>;\n};\n\nconst Ol: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return <ol className=\"llm-md-list llm-md-list-ordered\">{children}</ol>;\n};\n\nconst Li: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return <li className=\"llm-md-list-item\">{children}</li>;\n};\n\n/**\n * Custom heading components\n */\nconst Heading: React.FC<{ level: number; children: React.ReactNode }> = ({ level, children }) => {\n  const Tag = `h${level}` as keyof JSX.IntrinsicElements;\n  return <Tag className={`llm-md-heading llm-md-heading-${level}`}>{children}</Tag>;\n};\n\n/**\n * Custom blockquote component\n */\nconst Blockquote: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return <blockquote className=\"llm-md-blockquote\">{children}</blockquote>;\n};\n\n/**\n * Custom table components\n */\nconst Table: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return (\n    <div className=\"llm-md-table-wrapper\">\n      <table className=\"llm-md-table\">{children}</table>\n    </div>\n  );\n};\n\nconst Th: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return <th className=\"llm-md-th\">{children}</th>;\n};\n\nconst Td: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return <td className=\"llm-md-td\">{children}</td>;\n};\n\n/**\n * Markdown renderer component\n */\nexport const MarkdownRenderer: React.FC<MarkdownRendererProps> = ({ content }) => {\n  // Memoize the components object\n  const components = useMemo<Components>(\n    () => ({\n      p: Paragraph as Components['p'],\n      a: Link as Components['a'],\n      code: Code as Components['code'],\n      pre: Pre as Components['pre'],\n      ul: Ul as Components['ul'],\n      ol: Ol as Components['ol'],\n      li: Li as Components['li'],\n      h1: ((props: any) => <Heading level={1} {...props} />) as Components['h1'],\n      h2: ((props: any) => <Heading level={2} {...props} />) as Components['h2'],\n      h3: ((props: any) => <Heading level={3} {...props} />) as Components['h3'],\n      h4: ((props: any) => <Heading level={4} {...props} />) as Components['h4'],\n      h5: ((props: any) => <Heading level={5} {...props} />) as Components['h5'],\n      h6: ((props: any) => <Heading level={6} {...props} />) as Components['h6'],\n      blockquote: Blockquote as Components['blockquote'],\n      table: Table as Components['table'],\n      th: Th as Components['th'],\n      td: Td as Components['td'],\n    }),\n    []\n  );\n\n  return (\n    <div className=\"llm-markdown-content\">\n      <ReactMarkdown\n        remarkPlugins={[remarkGfm]}\n        components={components}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport default MarkdownRenderer;","/**\n * Message item component.\n */\n\nimport React, { useMemo } from 'react';\nimport { ChatMessage } from '../models/types';\nimport { MarkdownRenderer } from './MarkdownRenderer';\n\nexport interface MessageItemProps {\n  message: ChatMessage;\n}\n\n/**\n * Format timestamp to readable string\n */\nfunction formatTimestamp(timestamp: number): string {\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString(undefined, {\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\n/**\n * Message item component\n */\nexport const MessageItem: React.FC<MessageItemProps> = ({ message }) => {\n  const isUser = message.role === 'user';\n  const isAssistant = message.role === 'assistant';\n  const isStreaming = message.isStreaming;\n\n  // Parse message content\n  const textContent = useMemo(() => {\n    if (typeof message.content === 'string') {\n      return message.content;\n    }\n    // Handle array content (text + images)\n    const textParts = message.content.filter(\n      (part) => part.type === 'text'\n    ) as Array<{ type: 'text'; text: string }>;\n    return textParts.map((part) => part.text).join('');\n  }, [message.content]);\n\n  // Extract images from content\n  const images = useMemo(() => {\n    if (typeof message.content === 'string') {\n      return [];\n    }\n    return message.content.filter(\n      (part) => part.type === 'image_url'\n    ) as Array<{ type: 'image_url'; image_url: { url: string } }>;\n  }, [message.content]);\n\n  return (\n    <div className={`llm-message-item llm-message-${message.role}`}>\n      {/* Avatar */}\n      <div className=\"llm-message-avatar\">\n        {isUser ? (\n          <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\n            <path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\" />\n          </svg>\n        ) : (\n          <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"currentColor\">\n            <path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z\" />\n            <path d=\"M7 9h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z\" />\n          </svg>\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"llm-message-content\">\n        {/* Images (for user messages) */}\n        {images.length > 0 && (\n          <div className=\"llm-message-images\">\n            {images.map((img, index) => (\n              <img\n                key={index}\n                src={img.image_url.url}\n                alt={`Attached image ${index + 1}`}\n                className=\"llm-message-image\"\n              />\n            ))}\n          </div>\n        )}\n\n        {/* Text content */}\n        {isAssistant ? (\n          <div className=\"llm-message-text\">\n            {textContent ? (\n              <MarkdownRenderer content={textContent} />\n            ) : (\n              <span className=\"llm-message-placeholder\">\n                {isStreaming ? '...' : 'Empty response'}\n              </span>\n            )}\n          </div>\n        ) : (\n          <div className=\"llm-message-text llm-message-user-text\">\n            {textContent}\n          </div>\n        )}\n\n        {/* Timestamp */}\n        <div className=\"llm-message-meta\">\n          <span className=\"llm-message-time\">\n            {formatTimestamp(message.timestamp)}\n          </span>\n          {isStreaming && (\n            <span className=\"llm-message-streaming\">\n              <span className=\"llm-streaming-dot\"></span>\n              <span className=\"llm-streaming-dot\"></span>\n              <span className=\"llm-streaming-dot\"></span>\n            </span>\n          )}\n          {message.error && (\n            <span className=\"llm-message-error\">{message.error}</span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MessageItem;","/**\n * Message list component.\n */\n\nimport React, { useEffect, useRef } from 'react';\nimport { ChatMessage } from '../models/types';\nimport { MessageItem } from './MessageItem';\n\nexport interface MessageListProps {\n  messages: ChatMessage[];\n  isLoading: boolean;\n}\n\n/**\n * Message list component with auto-scroll\n */\nexport const MessageList: React.FC<MessageListProps> = ({ messages, isLoading }) => {\n  const listRef = useRef<HTMLDivElement>(null);\n  const bottomRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (bottomRef.current) {\n      bottomRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [messages]);\n\n  // Empty state\n  if (messages.length === 0) {\n    return (\n      <div className=\"llm-message-list llm-message-list-empty\">\n        <div className=\"llm-empty-state\">\n          <div className=\"llm-empty-icon\">\n            <svg viewBox=\"0 0 24 24\" width=\"48\" height=\"48\" fill=\"currentColor\">\n              <path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z\" />\n              <path d=\"M7 9h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z\" />\n            </svg>\n          </div>\n          <h3>LLM Coding Assistant</h3>\n          <p>Start a conversation to get help with your code.</p>\n          <ul className=\"llm-empty-hints\">\n            <li>Ask questions about code</li>\n            <li>Debug issues</li>\n            <li>Generate code snippets</li>\n            <li>Explain concepts</li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"llm-message-list\" ref={listRef}>\n      {messages.map((message) => (\n        <MessageItem key={message.id} message={message} />\n      ))}\n\n      {/* Loading indicator */}\n      {isLoading && (\n        <div className=\"llm-loading-indicator\">\n          <div className=\"llm-loading-dots\">\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        </div>\n      )}\n\n      {/* Scroll anchor */}\n      <div ref={bottomRef} />\n    </div>\n  );\n};\n\nexport default MessageList;","/**\n * Settings panel component.\n */\n\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { LLMSettings, ConnectionTestResult } from '../models/types';\n\nexport interface SettingsPanelProps {\n  settings: LLMSettings;\n  onSettingsChange: (settings: Partial<LLMSettings>) => void;\n  onClose: () => void;\n  onTestConnection: () => Promise<ConnectionTestResult>;\n  isTestingConnection: boolean;\n}\n\n/**\n * API Provider options with default endpoints\n */\nconst PROVIDER_OPTIONS = [\n  { value: 'openai', label: 'OpenAI', endpoint: 'https://api.openai.com/v1', defaultModel: 'gpt-4o' },\n  { value: 'anthropic', label: 'Anthropic (Claude)', endpoint: 'https://api.anthropic.com/v1', defaultModel: 'claude-3-sonnet-20240229' },\n  { value: 'ollama', label: 'Ollama (Local)', endpoint: 'http://localhost:11434/v1', defaultModel: 'llama3' },\n  { value: 'deepseek', label: 'DeepSeek', endpoint: 'https://api.deepseek.com/v1', defaultModel: 'deepseek-chat' },\n  { value: 'qianwen', label: '', endpoint: 'https://dashscope.aliyuncs.com/compatible-mode/v1', defaultModel: 'qwen-turbo' },\n  { value: 'zhipu', label: 'AI', endpoint: 'https://open.bigmodel.cn/api/paas/v4', defaultModel: 'glm-4' },\n  { value: 'moonshot', label: 'Moonshot ()', endpoint: 'https://api.moonshot.cn/v1', defaultModel: 'moonshot-v1-8k' },\n  { value: 'siliconflow', label: 'SiliconFlow', endpoint: 'https://api.siliconflow.cn/v1', defaultModel: 'Qwen/Qwen2-7B-Instruct' },\n  { value: 'custom', label: 'Custom ()', endpoint: '', defaultModel: '' },\n];\n\n/**\n * Settings panel component\n */\nexport const SettingsPanel: React.FC<SettingsPanelProps> = ({\n  settings,\n  onSettingsChange,\n  onClose,\n  onTestConnection,\n  isTestingConnection,\n}) => {\n  // Find current provider based on endpoint\n  const getCurrentProvider = () => {\n    const provider = PROVIDER_OPTIONS.find(p => {\n      if (p.value === 'custom') return false;\n      return settings.apiEndpoint.includes(p.endpoint.replace('https://', '').replace('http://', '').split('/')[0]);\n    });\n    return provider || PROVIDER_OPTIONS.find(p => p.value === 'custom')!;\n  };\n\n  const [localSettings, setLocalSettings] = useState<LLMSettings>({\n    ...settings,\n    apiKey: settings.apiKey || '',\n  });\n  const [currentProvider, setCurrentProvider] = useState(getCurrentProvider());\n  const [testResult, setTestResult] = useState<ConnectionTestResult | null>(null);\n  const [hasChanges, setHasChanges] = useState(false);\n  const [showApiKey, setShowApiKey] = useState(false);\n\n  // Update local settings when props change\n  useEffect(() => {\n    setLocalSettings({\n      ...settings,\n      apiKey: settings.apiKey || '',\n    });\n    setCurrentProvider(getCurrentProvider());\n  }, [settings]);\n\n  // Check for changes\n  useEffect(() => {\n    const changed = JSON.stringify(localSettings) !== JSON.stringify(settings);\n    setHasChanges(changed);\n  }, [localSettings, settings]);\n\n  // Handle input change\n  const handleChange = useCallback((key: keyof LLMSettings, value: string | number | boolean) => {\n    setLocalSettings((prev) => ({\n      ...prev,\n      [key]: value,\n    }));\n  }, []);\n\n  // Handle provider change\n  const handleProviderChange = useCallback((providerValue: string) => {\n    const provider = PROVIDER_OPTIONS.find(p => p.value === providerValue)!;\n    setCurrentProvider(provider);\n\n    if (provider.value === 'custom') {\n      // Custom: keep current endpoint and model\n      setLocalSettings((prev) => ({\n        ...prev,\n        apiEndpoint: prev.apiEndpoint,\n        model: prev.model,\n      }));\n    } else {\n      // Predefined provider: auto-fill endpoint and default model\n      setLocalSettings((prev) => ({\n        ...prev,\n        apiEndpoint: provider.endpoint,\n        model: provider.defaultModel,\n      }));\n    }\n  }, []);\n\n  // Handle model change\n  const handleModelChange = useCallback((value: string) => {\n    handleChange('model', value);\n  }, [handleChange]);\n\n  // Handle endpoint change\n  const handleEndpointChange = useCallback((value: string) => {\n    setLocalSettings((prev) => ({\n      ...prev,\n      apiEndpoint: value,\n    }));\n    // If custom endpoint, mark as custom provider\n    const isKnownProvider = PROVIDER_OPTIONS.some(p => p.value !== 'custom' && value.includes(p.endpoint.replace('https://', '').replace('http://', '').split('/')[0]));\n    if (!isKnownProvider) {\n      setCurrentProvider(PROVIDER_OPTIONS.find(p => p.value === 'custom')!);\n    }\n  }, []);\n\n  // Handle save\n  const handleSave = useCallback(() => {\n    onSettingsChange(localSettings);\n    setHasChanges(false);\n  }, [localSettings, onSettingsChange]);\n\n  // Handle test connection\n  const handleTestConnection = useCallback(async () => {\n    setTestResult(null);\n    try {\n      // First save the current settings to ensure test uses latest values\n      await onSettingsChange(localSettings);\n      setHasChanges(false);\n\n      // Then test the connection\n      const result = await onTestConnection();\n      setTestResult(result);\n    } catch (err) {\n      setTestResult({\n        success: false,\n        error: err instanceof Error ? err.message : 'Connection test failed',\n      });\n    }\n  }, [localSettings, onSettingsChange, onTestConnection]);\n\n  // Check if API key is available\n  const isApiKeyAvailable = localSettings.apiKey.trim().length > 0;\n\n  return (\n    <div className=\"llm-settings-panel\">\n      {/* Header */}\n      <div className=\"llm-settings-header\">\n        <h3>Settings</h3>\n        <button className=\"llm-close-btn\" onClick={onClose} title=\"Close settings\">\n          <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\n            <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n          </svg>\n        </button>\n      </div>\n\n      {/* Content */}\n      <div className=\"llm-settings-content\">\n        {/* API Provider Section */}\n        <div className=\"llm-settings-section\">\n          <h4 className=\"llm-section-title\">API Provider</h4>\n\n          {/* Provider Selection */}\n          <div className=\"llm-settings-field\">\n            <label htmlFor=\"provider\">Select Provider</label>\n            <select\n              id=\"provider\"\n              value={currentProvider.value}\n              onChange={(e) => handleProviderChange(e.target.value)}\n            >\n              {PROVIDER_OPTIONS.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* API Endpoint */}\n          <div className=\"llm-settings-field\">\n            <label htmlFor=\"apiEndpoint\">API Endpoint</label>\n            <input\n              id=\"apiEndpoint\"\n              type=\"text\"\n              value={localSettings.apiEndpoint}\n              onChange={(e) => handleEndpointChange(e.target.value)}\n              placeholder=\"https://api.openai.com/v1\"\n            />\n            <p className=\"llm-settings-hint\">\n              The base URL for the API endpoint\n            </p>\n          </div>\n\n          {/* API Key */}\n          <div className=\"llm-settings-field\">\n            <label htmlFor=\"apiKey\">API Key</label>\n            <div className=\"llm-input-with-button\">\n              <input\n                id=\"apiKey\"\n                type={showApiKey ? 'text' : 'password'}\n                value={localSettings.apiKey}\n                onChange={(e) => handleChange('apiKey', e.target.value)}\n                placeholder={currentProvider.value === 'ollama' ? 'any-value (Ollama local no auth)' : 'sk-...'}\n                className=\"llm-api-key-input\"\n              />\n              <button\n                className=\"llm-toggle-visibility-btn\"\n                onClick={() => setShowApiKey(!showApiKey)}\n                title={showApiKey ? 'Hide API key' : 'Show API key'}\n              >\n                {showApiKey ? (\n                  <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\n                    <path d=\"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"/>\n                  </svg>\n                ) : (\n                  <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" fill=\"currentColor\">\n                    <path d=\"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z\"/>\n                  </svg>\n                )}\n              </button>\n            </div>\n            <p className=\"llm-settings-hint\">\n              {currentProvider.value === 'ollama'\n                ? 'Ollama '\n                : 'Enter your API key'}\n            </p>\n          </div>\n        </div>\n\n        {/* Model Section */}\n        <div className=\"llm-settings-section\">\n          <h4 className=\"llm-section-title\">Model Configuration</h4>\n          <div className=\"llm-settings-field\">\n            <label htmlFor=\"model\">Model Name</label>\n            <input\n              id=\"model\"\n              type=\"text\"\n              value={localSettings.model}\n              onChange={(e) => handleModelChange(e.target.value)}\n              placeholder={currentProvider.defaultModel || 'e.g., gpt-4o, llama3, qwen-turbo'}\n            />\n            <p className=\"llm-settings-hint\">\n              Enter the model name supported by your API provider\n            </p>\n          </div>\n        </div>\n\n        {/* Generation Parameters */}\n        <div className=\"llm-settings-section\">\n          <h4 className=\"llm-section-title\">Generation Parameters</h4>\n\n          {/* Temperature */}\n          <div className=\"llm-settings-field\">\n            <label htmlFor=\"temperature\">\n              Temperature: <span className=\"llm-value\">{localSettings.temperature}</span>\n            </label>\n            <input\n              id=\"temperature\"\n              type=\"range\"\n              min=\"0\"\n              max=\"2\"\n              step=\"0.1\"\n              value={localSettings.temperature}\n              onChange={(e) => handleChange('temperature', parseFloat(e.target.value))}\n            />\n            <p className=\"llm-settings-hint\">\n              Higher values (0-2) produce more creative outputs\n            </p>\n          </div>\n\n          {/* Max Tokens */}\n          <div className=\"llm-settings-field\">\n            <label htmlFor=\"maxTokens\">Max Tokens</label>\n            <input\n              id=\"maxTokens\"\n              type=\"number\"\n              min=\"1\"\n              max=\"128000\"\n              value={localSettings.maxTokens}\n              onChange={(e) => handleChange('maxTokens', parseInt(e.target.value, 10))}\n            />\n            <p className=\"llm-settings-hint\">\n              Maximum number of tokens in the response\n            </p>\n          </div>\n        </div>\n\n        {/* System Prompt */}\n        <div className=\"llm-settings-section\">\n          <h4 className=\"llm-section-title\">System Prompt</h4>\n          <div className=\"llm-settings-field\">\n            <textarea\n              id=\"systemPrompt\"\n              value={localSettings.systemPrompt}\n              onChange={(e) => handleChange('systemPrompt', e.target.value)}\n              rows={4}\n              placeholder=\"You are a helpful AI coding assistant...\"\n            />\n            <p className=\"llm-settings-hint\">\n              Instructions that define the assistant's behavior\n            </p>\n          </div>\n        </div>\n\n        {/* Toggles */}\n        <div className=\"llm-settings-section\">\n          <h4 className=\"llm-section-title\">Features</h4>\n          <div className=\"llm-settings-field llm-settings-toggle\">\n            <label>\n              <input\n                type=\"checkbox\"\n                checked={localSettings.enableStreaming}\n                onChange={(e) => handleChange('enableStreaming', e.target.checked)}\n              />\n              <span>Enable streaming responses</span>\n            </label>\n            <p className=\"llm-settings-hint\">\n              Stream responses in real-time\n            </p>\n          </div>\n\n          <div className=\"llm-settings-field llm-settings-toggle\">\n            <label>\n              <input\n                type=\"checkbox\"\n                checked={localSettings.enableVision}\n                onChange={(e) => handleChange('enableVision', e.target.checked)}\n              />\n              <span>Enable image input (Vision)</span>\n            </label>\n            <p className=\"llm-settings-hint\">\n              Allow sending images to vision-capable models\n            </p>\n          </div>\n        </div>\n\n        {/* Test Connection */}\n        <div className=\"llm-settings-section\">\n          <button\n            className=\"llm-test-btn\"\n            onClick={handleTestConnection}\n            disabled={isTestingConnection || !isApiKeyAvailable}\n          >\n            {isTestingConnection ? (\n              <>\n                <span className=\"llm-spinner\"></span>\n                Testing...\n              </>\n            ) : (\n              'Test Connection'\n            )}\n          </button>\n\n          {testResult && (\n            <div className={`llm-test-result ${testResult.success ? 'llm-test-success' : 'llm-test-error'}`}>\n              {testResult.success ? (\n                <p> Connection successful! Model: {testResult.model}</p>\n              ) : (\n                <p> Error: {testResult.error}</p>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className=\"llm-settings-footer\">\n        <button className=\"llm-cancel-btn\" onClick={onClose}>\n          Cancel\n        </button>\n        <button\n          className=\"llm-save-btn\"\n          onClick={handleSave}\n          disabled={!hasChanges}\n        >\n          Save Changes\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SettingsPanel;","/**\n * Icons for the LLM Assistant extension.\n */\n\nimport { LabIcon } from '@jupyterlab/ui-components';\n\n// Chat icon (SVG path)\nconst chatIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n  <path fill=\"currentColor\" d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z\"/>\n  <path fill=\"currentColor\" d=\"M7 9h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z\"/>\n</svg>`;\n\n// Settings icon\nconst settingsIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n  <path fill=\"currentColor\" d=\"M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"/>\n</svg>`;\n\n// Send icon\nconst sendIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n  <path fill=\"currentColor\" d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/>\n</svg>`;\n\n// Clear icon\nconst clearIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n  <path fill=\"currentColor\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n</svg>`;\n\n// Image icon\nconst imageIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n  <path fill=\"currentColor\" d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n</svg>`;\n\n// Copy icon\nconst copyIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n  <path fill=\"currentColor\" d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"/>\n</svg>`;\n\n// Check icon\nconst checkIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n  <path fill=\"currentColor\" d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/>\n</svg>`;\n\n// Spinner icon\nconst spinnerIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n  <path fill=\"currentColor\" d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\" opacity=\"0.3\"/>\n  <path fill=\"currentColor\" d=\"M12 4V2C6.48 2 2 6.48 2 12h2c0-4.42 3.58-8 8-8z\"/>\n</svg>`;\n\n// Export icons\nexport const chatIcon = new LabIcon({\n  name: 'llm-assistant:chat',\n  svgstr: chatIconSvg,\n});\n\nexport const settingsIcon = new LabIcon({\n  name: 'llm-assistant:settings',\n  svgstr: settingsIconSvg,\n});\n\nexport const sendIcon = new LabIcon({\n  name: 'llm-assistant:send',\n  svgstr: sendIconSvg,\n});\n\nexport const clearIcon = new LabIcon({\n  name: 'llm-assistant:clear',\n  svgstr: clearIconSvg,\n});\n\nexport const imageIcon = new LabIcon({\n  name: 'llm-assistant:image',\n  svgstr: imageIconSvg,\n});\n\nexport const copyIcon = new LabIcon({\n  name: 'llm-assistant:copy',\n  svgstr: copyIconSvg,\n});\n\nexport const checkIcon = new LabIcon({\n  name: 'llm-assistant:check',\n  svgstr: checkIconSvg,\n});\n\nexport const spinnerIcon = new LabIcon({\n  name: 'llm-assistant:spinner',\n  svgstr: spinnerIconSvg,\n});","/**\n * JupyterLab LLM Assistant Extension\n *\n * Main entry point for the extension.\n */\n\nimport {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin,\n} from '@jupyterlab/application';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { ILayoutRestorer } from '@jupyterlab/application';\nimport { ICommandPalette } from '@jupyterlab/apputils';\nimport { chatIcon } from './components/icons';\nimport { LLMAssistantPanel } from './widgets/LLMAssistantPanel';\nimport { LLMSettings } from './models/types';\nimport { SettingsModel } from './models/settings';\n\n/**\n * The extension ID\n */\nconst PLUGIN_ID = 'jupyterlab-llm-assistant:plugin';\n\n/**\n * The command IDs\n */\nnamespace CommandIDs {\n  export const openAssistant = 'llm-assistant:open';\n  export const clearChat = 'llm-assistant:clear';\n}\n\n/**\n * The JupyterLab plugin\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: PLUGIN_ID,\n  autoStart: true,\n  requires: [ISettingRegistry],\n  optional: [ICommandPalette, ILayoutRestorer],\n  activate: activatePlugin,\n};\n\n/**\n * Activate the plugin\n */\nasync function activatePlugin(\n  app: JupyterFrontEnd,\n  settingRegistry: ISettingRegistry,\n  palette: ICommandPalette | null,\n  restorer: ILayoutRestorer | null\n): Promise<void> {\n  console.log('JupyterLab LLM Assistant extension is activated!');\n\n  // Create the sidebar panel\n  const panel = new LLMAssistantPanel();\n  panel.id = 'llm-assistant-panel';\n  panel.title.icon = chatIcon;\n  panel.title.caption = 'LLM Assistant';\n\n  // Load settings\n  let settings: LLMSettings = {\n    apiEndpoint: 'https://api.openai.com/v1',\n    apiKey: '',\n    model: 'gpt-4o',\n    temperature: 0.7,\n    maxTokens: 4096,\n    systemPrompt: 'You are a helpful AI coding assistant. Help users with programming questions, explain code, debug issues, and provide code examples. Be concise and accurate.',\n    enableStreaming: true,\n    enableVision: true,\n  };\n\n  try {\n    const settingValues = await settingRegistry.load(PLUGIN_ID);\n    settings = {\n      ...settings,\n      ...settingValues.composite as Partial<LLMSettings>,\n    };\n\n    // Listen for settings changes\n    settingRegistry.pluginChanged.connect(async () => {\n      const newSettings = await settingRegistry.load(PLUGIN_ID);\n      settings = {\n        ...settings,\n        ...newSettings.composite as Partial<LLMSettings>,\n      };\n    });\n  } catch (error) {\n    console.warn('Failed to load settings, using defaults:', error);\n  }\n\n  // Add to right sidebar\n  app.shell.add(panel, 'right', { rank: 100 });\n\n  // Restore panel state\n  if (restorer) {\n    restorer.add(panel, 'llm-assistant-panel');\n  }\n\n  // Add commands\n  app.commands.addCommand(CommandIDs.openAssistant, {\n    label: 'Open LLM Assistant',\n    icon: chatIcon,\n    execute: () => {\n      app.shell.activateById(panel.id);\n    },\n  });\n\n  app.commands.addCommand(CommandIDs.clearChat, {\n    label: 'Clear LLM Assistant Chat',\n    execute: () => {\n      // This will be handled by the panel\n      panel.node.dispatchEvent(new CustomEvent('llm-clear-chat'));\n    },\n  });\n\n  // Add to command palette\n  if (palette) {\n    palette.addItem({\n      command: CommandIDs.openAssistant,\n      category: 'LLM Assistant',\n    });\n  }\n\n  console.log('JupyterLab LLM Assistant extension activated successfully!');\n}\n\n/**\n * Export the plugin\n */\nexport default plugin;\n\n/**\n * Export components and models for external use\n */\nexport { LLMAssistantPanel } from './widgets/LLMAssistantPanel';\nexport { ChatModel } from './models/chat';\nexport { SettingsModel } from './models/settings';\nexport { LLMApiService } from './services/api';\nexport type { LLMSettings, ChatMessage, ImageData } from './models/types';","/**\n * Chat model for managing chat state.\n */\n\nimport { Signal } from '@lumino/signaling';\nimport { ChatMessage, LLMSettings, ImageData } from './types';\nimport { LLMApiService } from '../services/api';\n\n/**\n * Generate a unique ID\n */\nfunction generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Chat model class\n */\nexport class ChatModel {\n  private _messages: ChatMessage[] = [];\n  private _isLoading = false;\n  private _error: string | null = null;\n  private _settings: LLMSettings;\n  private _apiService: LLMApiService;\n\n  /**\n   * Signal emitted when messages change\n   */\n  readonly messagesChanged = new Signal<this, ChatMessage[]>(this);\n\n  /**\n   * Signal emitted when loading state changes\n   */\n  readonly loadingChanged = new Signal<this, boolean>(this);\n\n  /**\n   * Signal emitted when error changes\n   */\n  readonly errorChanged = new Signal<this, string | null>(this);\n\n  constructor(settings: LLMSettings) {\n    this._settings = settings;\n    this._apiService = new LLMApiService();\n  }\n\n  /**\n   * Get all messages\n   */\n  get messages(): ChatMessage[] {\n    return this._messages;\n  }\n\n  /**\n   * Get loading state\n   */\n  get isLoading(): boolean {\n    return this._isLoading;\n  }\n\n  /**\n   * Get current error\n   */\n  get error(): string | null {\n    return this._error;\n  }\n\n  /**\n   * Get current settings\n   */\n  get settings(): LLMSettings {\n    return this._settings;\n  }\n\n  /**\n   * Update settings\n   */\n  updateSettings(settings: Partial<LLMSettings>): void {\n    this._settings = { ...this._settings, ...settings };\n  }\n\n  /**\n   * Add a user message\n   */\n  addUserMessage(text: string, images?: ImageData[]): ChatMessage {\n    const message: ChatMessage = {\n      id: generateId(),\n      role: 'user',\n      content: text,\n      timestamp: Date.now(),\n    };\n\n    this._messages = [...this._messages, message];\n    this.messagesChanged.emit(this._messages);\n\n    // Process images if provided and vision is enabled\n    if (images && images.length > 0 && this._settings.enableVision) {\n      // Images will be sent separately to the API\n      // For now, just store the text message\n    }\n\n    return message;\n  }\n\n  /**\n   * Add an assistant message\n   */\n  addAssistantMessage(content: string = '', isStreaming = false): ChatMessage {\n    const message: ChatMessage = {\n      id: generateId(),\n      role: 'assistant',\n      content,\n      timestamp: Date.now(),\n      isStreaming,\n    };\n\n    this._messages = [...this._messages, message];\n    this.messagesChanged.emit(this._messages);\n\n    return message;\n  }\n\n  /**\n   * Update an existing message\n   */\n  updateMessage(id: string, updates: Partial<ChatMessage>): void {\n    this._messages = this._messages.map(msg =>\n      msg.id === id ? { ...msg, ...updates } : msg\n    );\n    this.messagesChanged.emit(this._messages);\n  }\n\n  /**\n   * Append content to the last assistant message\n   */\n  appendToLastAssistant(content: string): void {\n    const messages = [...this._messages];\n    for (let i = messages.length - 1; i >= 0; i--) {\n      if (messages[i].role === 'assistant') {\n        const currentContent = messages[i].content;\n        messages[i] = {\n          ...messages[i],\n          content: typeof currentContent === 'string'\n            ? currentContent + content\n            : currentContent,\n        };\n        break;\n      }\n    }\n    this._messages = messages;\n    this.messagesChanged.emit(this._messages);\n  }\n\n  /**\n   * Set loading state\n   */\n  setLoading(loading: boolean): void {\n    this._isLoading = loading;\n    this.loadingChanged.emit(loading);\n  }\n\n  /**\n   * Set error\n   */\n  setError(error: string | null): void {\n    this._error = error;\n    this.errorChanged.emit(error);\n  }\n\n  /**\n   * Clear all messages\n   */\n  clearMessages(): void {\n    this._messages = [];\n    this._error = null;\n    this.messagesChanged.emit(this._messages);\n    this.errorChanged.emit(null);\n  }\n\n  /**\n   * Send a message and get a response\n   */\n  async sendMessage(text: string, images: ImageData[] = []): Promise<void> {\n    // Add user message\n    this.addUserMessage(text, images);\n\n    // Set loading state\n    this.setLoading(true);\n    this.setError(null);\n\n    // Prepare messages for API\n    const apiMessages = this._messages\n      .filter(msg => msg.role !== 'system')\n      .map(msg => ({\n        role: msg.role,\n        content: msg.content,\n      }));\n\n    // Extract image data URLs\n    const imageDataUrls = images.map(img => img.dataUrl);\n\n    try {\n      if (this._settings.enableStreaming) {\n        // Create assistant message placeholder\n        const assistantMsg = this.addAssistantMessage('', true);\n\n        // Stream response\n        await this._apiService.streamChat(\n          apiMessages,\n          imageDataUrls.length > 0 ? imageDataUrls : undefined,\n          (chunk: string) => {\n            this.appendToLastAssistant(chunk);\n          },\n          this._settings\n        );\n\n        // Mark streaming complete\n        this.updateMessage(assistantMsg.id, { isStreaming: false });\n      } else {\n        // Non-streaming response\n        const response = await this._apiService.chat(\n          apiMessages,\n          imageDataUrls.length > 0 ? imageDataUrls : undefined,\n          this._settings\n        );\n\n        this.addAssistantMessage(response.content);\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'An error occurred';\n      this.setError(errorMessage);\n\n      // Add error message\n      this.addAssistantMessage(`Error: ${errorMessage}`);\n      this.updateMessage(this._messages[this._messages.length - 1].id, {\n        error: errorMessage\n      });\n    } finally {\n      this.setLoading(false);\n    }\n  }\n\n  /**\n   * Clear chat history\n   */\n  clear(): void {\n    this.clearMessages();\n  }\n}","/**\n * Settings model for managing LLM settings.\n */\n\nimport { Signal } from '@lumino/signaling';\nimport { LLMSettings, ConnectionTestResult, ModelsResponse } from './types';\nimport { LLMApiService } from '../services/api';\n\n/**\n * Default settings\n */\nexport const DEFAULT_SETTINGS: LLMSettings = {\n  apiEndpoint: 'https://api.openai.com/v1',\n  apiKey: '',\n  model: 'gpt-4o',\n  temperature: 0.7,\n  maxTokens: 4096,\n  systemPrompt: 'You are a helpful AI coding assistant. Help users with programming questions, explain code, debug issues, and provide code examples. Be concise and accurate.',\n  enableStreaming: true,\n  enableVision: true,\n};\n\n/**\n * Settings model class\n */\nexport class SettingsModel {\n  private _settings: LLMSettings;\n  private _apiService: LLMApiService;\n\n  /**\n   * Signal emitted when settings change\n   */\n  readonly settingsChanged = new Signal<this, LLMSettings>(this);\n\n  constructor(initialSettings?: Partial<LLMSettings>) {\n    this._settings = { ...DEFAULT_SETTINGS, ...initialSettings };\n    this._apiService = new LLMApiService();\n  }\n\n  /**\n   * Get current settings\n   */\n  get settings(): LLMSettings {\n    return { ...this._settings };\n  }\n\n  /**\n   * Update settings\n   */\n  updateSettings(updates: Partial<LLMSettings>): void {\n    this._settings = { ...this._settings, ...updates };\n    this.settingsChanged.emit(this._settings);\n  }\n\n  /**\n   * Load settings from server\n   */\n  async loadSettings(): Promise<LLMSettings> {\n    try {\n      const settings = await this._apiService.getConfig();\n      this._settings = { ...DEFAULT_SETTINGS, ...settings };\n      this.settingsChanged.emit(this._settings);\n      return this._settings;\n    } catch (err) {\n      console.error('Failed to load settings:', err);\n      return this._settings;\n    }\n  }\n\n  /**\n   * Save settings to server\n   */\n  async saveSettings(settings: Partial<LLMSettings>): Promise<void> {\n    try {\n      await this._apiService.setConfig(settings);\n      this._settings = { ...this._settings, ...settings };\n      this.settingsChanged.emit(this._settings);\n    } catch (err) {\n      console.error('Failed to save settings:', err);\n      throw err;\n    }\n  }\n\n  /**\n   * Test connection\n   */\n  async testConnection(): Promise<ConnectionTestResult> {\n    return this._apiService.testConnection();\n  }\n\n  /**\n   * Get available models\n   */\n  async getModels(): Promise<ModelsResponse> {\n    return this._apiService.getModels();\n  }\n}","/**\n * API service for communicating with the backend.\n */\n\nimport { LLMSettings, ChatResponse, ConnectionTestResult, ModelsResponse, MessageRole, MessageContent } from '../models/types';\n\n/**\n * Get XSRF token from cookie\n */\nfunction getXsrfToken(): string {\n  const cookie = document.cookie\n    .split(';')\n    .find(c => c.trim().startsWith('_xsrf='));\n  return cookie ? decodeURIComponent(cookie.split('=')[1]) : '';\n}\n\n/**\n * Get base headers for API requests\n */\nfunction getHeaders(): Record<string, string> {\n  return {\n    'Content-Type': 'application/json',\n    'X-XSRFToken': getXsrfToken(),\n  };\n}\n\n/**\n * LLM API Service\n */\nexport class LLMApiService {\n  private baseUrl: string;\n\n  constructor() {\n    // Get base URL from JupyterLab's base URL\n    const baseUrl = (window as any).__jupyter_server_root_url || '';\n    this.baseUrl = `${baseUrl}llm-assistant`;\n  }\n\n  /**\n   * Get current configuration\n   */\n  async getConfig(): Promise<LLMSettings> {\n    const response = await fetch(`${this.baseUrl}/config`, {\n      method: 'GET',\n      headers: getHeaders(),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to get config: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Set configuration\n   */\n  async setConfig(settings: Partial<LLMSettings>): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/config`, {\n      method: 'POST',\n      headers: getHeaders(),\n      body: JSON.stringify(settings),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to set config: ${response.statusText}`);\n    }\n  }\n\n  /**\n   * Send a chat request (non-streaming)\n   */\n  async chat(\n    messages: Array<{ role: MessageRole; content: MessageContent }>,\n    images?: string[],\n    settings?: LLMSettings\n  ): Promise<ChatResponse> {\n    const response = await fetch(`${this.baseUrl}/chat`, {\n      method: 'POST',\n      headers: getHeaders(),\n      body: JSON.stringify({\n        messages,\n        images,\n        stream: false,\n        ...settings && {\n          model: settings.model,\n          temperature: settings.temperature,\n          maxTokens: settings.maxTokens,\n        },\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ error: response.statusText }));\n      throw new Error(error.error || `Request failed: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Send a streaming chat request\n   */\n  async streamChat(\n    messages: Array<{ role: MessageRole; content: MessageContent }>,\n    images: string[] | undefined,\n    onChunk: (chunk: string) => void,\n    settings?: LLMSettings\n  ): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/chat`, {\n      method: 'POST',\n      headers: getHeaders(),\n      body: JSON.stringify({\n        messages,\n        images,\n        stream: true,\n        ...settings && {\n          model: settings.model,\n          temperature: settings.temperature,\n          maxTokens: settings.maxTokens,\n        },\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ error: response.statusText }));\n      throw new Error(error.error || `Request failed: ${response.statusText}`);\n    }\n\n    const reader = response.body?.getReader();\n    if (!reader) {\n      throw new Error('No response body');\n    }\n\n    const decoder = new TextDecoder();\n    let buffer = '';\n\n    try {\n      while (true) {\n        const { done, value } = await reader.read();\n\n        if (done) {\n          break;\n        }\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n\n            if (data === '[DONE]') {\n              return;\n            }\n\n            try {\n              const parsed = JSON.parse(data);\n\n              if (parsed.error) {\n                throw new Error(parsed.error);\n              }\n\n              if (parsed.content) {\n                onChunk(parsed.content);\n              }\n            } catch (e) {\n              // Skip invalid JSON\n              if (e instanceof SyntaxError) {\n                continue;\n              }\n              throw e;\n            }\n          }\n        }\n      }\n    } finally {\n      reader.releaseLock();\n    }\n  }\n\n  /**\n   * Test the API connection\n   */\n  async testConnection(): Promise<ConnectionTestResult> {\n    const response = await fetch(`${this.baseUrl}/test`, {\n      method: 'GET',\n      headers: getHeaders(),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Test failed: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get available models\n   */\n  async getModels(): Promise<ModelsResponse> {\n    const response = await fetch(`${this.baseUrl}/models`, {\n      method: 'GET',\n      headers: getHeaders(),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to get models: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n}","/**\n * LLM Assistant sidebar panel widget.\n */\n\nimport { Panel, Widget } from '@lumino/widgets';\nimport { ReactWidget } from '@jupyterlab/apputils';\nimport { Signal } from '@lumino/signaling';\nimport { LLMSettings } from '../models/types';\nimport { ChatPanel } from '../components/ChatPanel';\nimport { SettingsModel } from '../models/settings';\n\n/**\n * LLM Assistant sidebar panel\n */\nexport class LLMAssistantPanel extends Panel {\n  /**\n   * Signal emitted when settings change\n   */\n  readonly settingsChanged = new Signal<this, LLMSettings>(this);\n\n  private _settingsModel: SettingsModel;\n\n  /**\n   * Create a new LLM Assistant panel\n   */\n  constructor() {\n    super();\n    this.addClass('llm-assistant-panel');\n\n    this._settingsModel = new SettingsModel();\n\n    // Create the main content widget\n    const content = this._createContent();\n    this.addWidget(content);\n  }\n\n  /**\n   * Create the main content widget\n   */\n  private _createContent(): Widget {\n    const content = ReactWidget.create(\n      <ChatPanelWrapper\n        settingsModel={this._settingsModel}\n        onSettingsChange={(settings) => this.settingsChanged.emit(settings)}\n      />\n    );\n    content.addClass('llm-assistant-content');\n    return content;\n  }\n\n  /**\n   * Get current settings\n   */\n  getSettings(): LLMSettings {\n    return this._settingsModel.settings;\n  }\n\n  /**\n   * Update settings\n   */\n  async updateSettings(settings: Partial<LLMSettings>): Promise<void> {\n    await this._settingsModel.saveSettings(settings);\n  }\n}\n\n/**\n * ChatPanel wrapper component\n */\ninterface ChatPanelWrapperProps {\n  settingsModel: SettingsModel;\n  onSettingsChange: (settings: LLMSettings) => void;\n}\n\nimport React, { useState, useEffect, useCallback } from 'react';\n\nconst ChatPanelWrapper: React.FC<ChatPanelWrapperProps> = ({\n  settingsModel,\n  onSettingsChange,\n}) => {\n  const [settings, setSettings] = useState<LLMSettings>(settingsModel.settings);\n\n  useEffect(() => {\n    // Load settings on mount\n    settingsModel.loadSettings().then((loaded) => {\n      setSettings(loaded);\n    });\n\n    // Subscribe to settings changes\n    settingsModel.settingsChanged.connect((_, newSettings) => {\n      setSettings(newSettings);\n    });\n\n    return () => {\n      // Cleanup\n    };\n  }, [settingsModel]);\n\n  const handleSettingsChange = useCallback(\n    async (newSettings: Partial<LLMSettings>) => {\n      await settingsModel.saveSettings(newSettings);\n      onSettingsChange({ ...settings, ...newSettings });\n    },\n    [settingsModel, settings, onSettingsChange]\n  );\n\n  const handleOpenSettings = useCallback(() => {\n    // Settings panel is managed internally by ChatPanel\n  }, []);\n\n  return (\n    <ChatPanel\n      settings={settings}\n      onOpenSettings={handleOpenSettings}\n    />\n  );\n};\n\nexport default LLMAssistantPanel;"],"names":[],"sourceRoot":""}